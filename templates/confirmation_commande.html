{% extends "base.html" %}
{% load humanize %}
{% block title %}Confirmation de Commande{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="alert alert-success text-center" role="alert">
                <h4 class="alert-heading">Commande Validée avec Succès !</h4>
                <p>Merci pour votre commande. Elle a été enregistrée sous le numéro <strong>N°{{ commande.id }}</strong>.</p>
                <hr>
                <p class="mb-0">Un email de confirmation a été envoyé à votre adresse.</p>
            </div>

            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Détails de la Commande N°{{ commande.id }}</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">
                            <strong>Date :</strong> {{ commande.date_commande|date:"d F Y H:i" }}
                        </li>
                        <li class="list-group-item">
                            <strong>Montant Total :</strong> 
                            <span class="fw-bold text-success">{{ commande.montant_total|floatformat:2|intcomma }} FCFA</span>
                        </li>
                        <li class="list-group-item">
                            <strong>Mode de Paiement :</strong> {{ commande.get_mode_paiement_display }}
                        </li>
                        <li class="list-group-item">
                            <strong>Adresse de Livraison :</strong> {{ commande.adresse }}
                        </li>
                    </ul>

                    <h6>Articles Commandés :</h6>
                    <table class="table table-striped table-sm">
                        <thead>
                            <tr>
                                <th>Produit</th>
                                <th class="text-end">Quantité</th>
                                <th class="text-end">Prix Unitaire</th>
                                <th class="text-end">Sous-Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for article in articles %}
                                <tr>
                                    <td>{{ article.produit.nom }}</td>
                                    <td class="text-end">{{ article.quantite }}</td>
                                    <td class="text-end">{{ article.prix_unitaire|floatformat:0|intcomma }} FCFA</td>
                                    <td class="text-end">{{ article.sous_total|floatformat:0|intcomma }} FCFA</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="card-footer text-center">
                    <a href="{% url 'liste_produits' %}" class="btn btn-primary me-2">Continuer les achats</a>
                    <a href="{% url 'mes_commandes' %}" class="btn btn-secondary">Voir toutes mes commandes</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}



<!-- {% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Confirmation de Commande - PROJET NATAL MBEY</title>
    </head>
<body>
    <div class="container mt-5 text-center">
        <h1 class="text-success">Merci pour votre commande !</h1>
        
        <p class="lead">Votre commande numéro **{{ commande.id }}** a été enregistrée et le paiement est **validé**.</p>
        <p>Montant total : **{{ commande.total_prix|floatformat:0 }} FCFA**</p>
        
        <a href="{% url 'liste_produits' %}" class="btn btn-primary btn-lg mt-4">
            <i class="fas fa-shopping-basket"></i> Continuer vos achats
        </a>
        
        <p class="mt-3">
            <a href="{% url 'details_commande' commande.id %}">Voir le récapitulatif de ma commande</a>
        </p>

    </div>

    </body>
</html> -->
